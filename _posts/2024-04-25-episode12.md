---
layout: post
title: "Episode 12: Inferential Statistics and Hypothesis Testing Playbook"
description: Using a case study on comparing salaries of police and social services department in New York for 2020 and 2021.
tags: [hypothesis, statistics, data.gov, a/b testing]
date: 2024-04-25

---

This post acts as a handy cheat sheet on how to draw important inferences from a given dataset using statistics and hypothesis testing.  

## Dataset:

Citywide Payroll Data (Fiscal Year) was taken from <a href="https://catalog.data.gov/dataset/citywide-payroll-data-fiscal-year">"Data.gov"</a>. Each record represents the following statistics for every city employee: Agency, Last Name, First Name, Middle Initial, Agency Start Date, Work Location Borough, Job Title Description, Leave Status as of the close of the FY (June 30th), Base Salary, Pay Basis, Regular Hours Paid, Regular Gross Paid, Overtime Hours worked, Total Overtime Paid, and Total Other Compensation.

For the purpose of simplicity, I have extracted the base salaries for two departments i.e. Police department and Social Services for fiscal years 2020 and 2021 and have taken a subset of relevant columns. 

<img src="{{site.baseurl}}/assets/episode_12_image_1.png">  

<img src="{{site.baseurl}}/assets/episode_12_image_2.png"> 

## Concepts:  

+ <span style="color:blue">Step 0: Descriptive statistics and their interpretation.</span>       
We use the Data Analysis toolpack in Excel to quickly get descriptive stats for the two departments. Refer to sheet **"descriptive_stats"** in inferential_stats_case_study.xlsx [1].

<img src="{{site.baseurl}}/assets/episode_12_image_3.png">  

We make the following observations and come up with relevant questions related to these observations which we will later answer through various statistical tests: 

- The police department has on average higher salary than social services. 
  - *Is this difference statistically significant?*  

- The police department's salaries vary a bit more than the social services department as shown by the standard deviation.  

<br/>   
- Median salary is lower than mean salary (excluding Police 2021). 
  - This implies a right/positive skew. 
  - But the small value for "Skew" for police shows that the tails don't extend too far to the right. 
  - Kurtosis less than 3 also shows that the distribution for police's salaries is thin-tailed and outlier frequency is low. 
  - Kurtosis is > 3 for Social Services which implies a higher outlier frequency and fat-tailed distribution.    

<figure>
  <img src="{{site.baseurl}}/assets/episode_12_image_4.png">  
  <figcaption>Source: <a href="https://www.scribbr.com/statistics/kurtosis/#:~:text=Kurtosis%20is%20a%20measure%20of,(medium%20tails)%20are%20mesokurtic.">Types of kurtosis</a></figcaption>
</figure>   

  

### Inferential Statistics:  

1. ### Confidence Interval for Mean, Single population: 


<> ------------------------------------- 

+ <span style="color:blue">Step 1(a): If we know the population variance for the salary of each department, calculate the confidence interval for the mean salary of a police officer and a social worker in New York for the year 2020. Assume that the police department's salary has a population standard deviation of $80k and social services has a population standard deviation of $60k.</span>  

Refer to sheet **"1. Known variance, CI, z-table"** in inferential_stats_case_study.xlsx [1].  

<figure>
  <img src="{{site.baseurl}}/assets/episode_12_image_5.png">  
  <figcaption>Case 1 (a): Confidence intervals. Population known, z-table. </figcaption>
</figure>  

<p style="color:red"> Interpretation: We are 95% confident that a police officer's salary will be from $67,794 to $69,256 and a social worker's salary will be from $57,861 to $60,050 in NYC in 2020.</p>

<> ------------------------------------- 

+ <span style="color:blue">Step 1(b): If we do not know the population variance for the salary of each department, calculate the confidence interval for the mean salary of a police officer and a social worker in New York for the year 2020.</span>


Refer to sheet **"2. Unkown var, CI, t-table"** in inferential_stats_case_study.xlsx [1].  

<figure>
  <img src="{{site.baseurl}}/assets/episode_12_image_6.png">  
  <figcaption>Case 1 (b): Confidence intervals. Population uknown, t-table</a></figcaption>
</figure> 

<p style="color:red"> Interpretation: We are 95% confident that a police officer's salary will be from $68,219 to $68,830 and a social worker's salary will be from $58,511 to $59,400 in NYC in 2020.</p>

<> ------------------------------------- 

2. ### Confidence Interval for Mean Difference, Dependent Samples: 

+ <span style="color:blue">Step 2: We are interested in knowing the salary increase for each department from 2020 to 2021. Calculate the confidence interval for that increase with 95% confidence.</span>


Refer to sheet **"3. Two Means Dependent Samples"** in inferential_stats_case_study.xlsx [1].  

<figure>
  <img src="{{site.baseurl}}/assets/episode_12_image_7.png">  
  <figcaption>Case 2: Confidence interval for difference of two means, dependent samples</a></figcaption>
</figure> 

<p style="color:red"> Interpretation: We are 95% confident that there was a salary increase of $2113 to $2237 for the police department. The whole interval is positive so we can be sure that the salary has increased.      

We are 95% confident that there was a salary increase of $439 to $513 for the social services department. The whole interval is positive so we can be sure that the salary has increased.   
</p>

<> ------------------------------------- 

3. ### Confidence Interval for Mean Difference, Independent Samples

+ <span style="color:blue">Step 3(a): We are interested in knowing the salary difference between police and social services. Calculate the confidence interval for that difference with 95% confidence. 

Assume that the police department's salary has a population standard deviation of $80k and social services has a population standard deviation of $60k.</span>


Refer to sheet **"4. Two Mean Ind Samp, known var"** in inferential_stats_case_study.xlsx [1].  

<figure>
  <img src="{{site.baseurl}}/assets/episode_12_image_8.png">  
  <figcaption>Case 3 (a): Confidence interval for difference of two means, independent samples, population variance known</a></figcaption>
</figure> 

<p style="color:red"> Interpretation: We are 95% confident that the true mean difference between police department and Social Services department falls in the interval [$8,253 , $10,885] in 2020.</p>

<> ------------------------------------- 

+ <span style="color:blue">Step 3(b): We are interested in knowing the salary difference between police and social services. Calculate the confidence interval for that difference with 95% confidence. We do not known the population variance but we know it's almost equal for both departments.</span>


Refer to sheet **"5. Two Mean Ind Samp, unkwn var"** in inferential_stats_case_study.xlsx [1].  

<figure>
  <img src="{{site.baseurl}}/assets/episode_12_image_9.png">  
  <figcaption>Case 3 (b): Confidence interval for difference of two means, independent samples, population variance unknown</a></figcaption>
</figure> 

<p style="color:red"> Interpretation: We are 95% confident that police department has $8-10k higher salaries than social services in 2020.</p>



